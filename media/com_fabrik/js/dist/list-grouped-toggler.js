/*! Fabrik */
define(["jquery"],function(a){var b=new Class({Implements:Options,options:{collapseOthers:!1,startCollapsed:!1,bootstrap:!1},initialize:function(b,c){var d,e,f,g;"null"!==typeOf(b)&&(this.setOptions(c),this.container=b,this.toggleState="shown",this.options.startCollapsed&&this.options.isGrouped&&this.collapse(),b.addEvent("click:relay(.fabrik_groupheading a.toggle)",function(b){return b.rightClick?void 0:(b.stop(),b.preventDefault(),this.options.collapseOthers&&this.collapse(),e=b.target.getParent(".fabrik_groupheading"),f=e.getElement(this.options.bootstrap?'*[data-role="toggle"]':"img"),g=f.retrieve("showgroup",!0),d=e.getNext()&&e.getNext().hasClass("fabrik_groupdata")?e.getNext():e.getParent().getNext(),g?a(d).hide():a(d).show(),this.setIcon(f,g),g=g?!1:!0,f.store("showgroup",g),!1)}.bind(this)))},setIcon:function(a,b){if(this.options.bootstrap){var c=a.get("data-expand-icon"),d=a.get("data-collapse-icon");b?(a.removeClass(c),a.addClass(d)):(a.addClass(c),a.removeClass(d))}else a.src=b?a.src.replace("orderasc","orderneutral"):a.src.replace("orderneutral","orderasc")},collapse:function(){a(this.container.getElements(".fabrik_groupdata")).hide();var b=this.options.bootstrap?"i":"img",c=this.container.getElements(".fabrik_groupheading a "+b);0===c.length&&(c=this.container.getElements(".fabrik_groupheading "+b)),c.each(function(a){a.store("showgroup",!1),this.setIcon(a,!0)}.bind(this))},expand:function(){a(this.container.getElements(".fabrik_groupdata")).show();var b=this.container.getElements(".fabrik_groupheading a img");0===b.length&&(b=this.container.getElements(".fabrik_groupheading img")),b.each(function(a){a.store("showgroup",!0),this.setIcon(a,!1)}.bind(this))},toggle:function(){"shown"===this.toggleState?this.collapse():this.expand(),this.toggleState="shown"===this.toggleState?"hidden":"shown"}});return b});