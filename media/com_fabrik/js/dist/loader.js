/*! Fabrik */
define(["jquery"],function(a){var b=new Class({initialize:function(){this.spinners={},this.spinnerCount={},this.watchResize()},sanitizeInline:function(b){return b=b?b:document.body,b instanceof a?b=0===b.length?!1:b[0]:"null"===typeOf(document.id(b))&&(b=!1),b},start:function(a,b){if(a=this.sanitizeInline(a),b=b?b:Joomla.JText._("COM_FABRIK_LOADING"),this.spinners[a]||(this.spinners[a]=new Spinner(a,{message:b})),this.spinnerCount[a]?this.spinnerCount[a]++:this.spinnerCount[a]=1,1===this.spinnerCount[a])try{this.spinners[a].position().show()}catch(c){}},stop:function(a){if(a=this.sanitizeInline(a),this.spinners[a]&&this.spinnerCount[a]){if(this.spinnerCount[a]>1)return void this.spinnerCount[a]--;var b=this.spinners[a];Browser.ie&&Browser.version<9?b.hide():(b.destroy(),delete this.spinnerCount[a],delete this.spinners[a])}},watchResize:function(){var b=this;setInterval(function(){a.each(b.spinners,function(b,c){try{var d=Math.max(40,a(c.target).height()),e=a(c.target).width();a(c.element).height(d),0!==e&&(a(c.element).width(e),a(c.element).find(".spinner-content").css("left",e/2)),c.position()}catch(f){}})},300)}});return b});