/*! Fabrik */
define(["jquery","fab/autocomplete-bootstrap","fab/fabrik"],function(a,b,c){var d=new Class({Extends:b,search:function(a){var b,d,e=this.getInputElement().get("value");if(""===e&&(this.element.value=""),e!==this.searchText&&""!==e){var f=document.id(this.options.observerid);if("null"===typeOf(f))return void this.parent(a);this.options.formRef&&(f=c.getBlock(this.options.formRef).formElements[this.options.observerid]),b=f.get("value")+"."+e,this.positionMenu(),this.cache[b]?this.populateMenu(this.cache[b])&&this.openMenu():(this.ajax&&(this.closeMenu(),this.ajax.cancel()),this.ajax=new Request({url:this.options.url,data:{value:e,fabrik_cascade_ajax_update:1,v:f.get("value")},onRequest:function(){c.loader.start(this.getInputElement())}.bind(this),onCancel:function(){c.loader.stop(this.getInputElement())}.bind(this),onSuccess:function(a){c.loader.stop(this.getInputElement()),this.ajax=null,this.completeAjax(a)}.bind(this),onFailure:function(a){c.loader.stop(this.getInputElement()),this.ajax=null,fconsole("Fabrik autocomplete: Ajax failure: Code "+a.status+": "+a.statusText);var b=c.getBlock(this.options.formRef).formElements.get(this.element.id);d=Joomla.JText._("COM_FABRIK_AUTOCOMPLETE_AJAX_ERROR"),b.setErrorMessage(d,"fabrikError",!0)}.bind(this)}).send())}this.searchText=e}});return d});