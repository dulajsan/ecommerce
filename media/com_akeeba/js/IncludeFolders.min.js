if(typeof akeeba=="undefined"){var akeeba={}}if(typeof akeeba.Extradirs=="undefined"){akeeba.Extradirs={}}(function(a){akeeba.Extradirs.render=function(c){var b=a("#ak_list_contents");b.html("");a.each(c,function(d,e){akeeba.Extradirs.addRow(d,e,b)});akeeba.Extradirs.addNewRecordButton(b)};akeeba.Extradirs.addRow=function(b,d,c){a(document.createElement("tr")).addClass("ak_filter_row").data("rootuuid",b).data("def",d).append(a(document.createElement("td")).append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container btn btn-default delete").click(function(){var e={uuid:a(this).parent().parent().data("rootuuid"),verb:"remove"};akeeba.Fsfilters.toggle(e,a(this),function(f,g){if(f.success==true){g.parent().parent().remove()}})}).append(a(document.createElement("span")).addClass("icon icon-trash deletebutton ak-toggle-button")))).append(a(document.createElement("td")).append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container btn btn-default").click(function(){var e=a(this).parent().parent();a(this).hide();e.find("td:first").find("span.delete").hide();a(this).parent().append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container btn btn-default save").addClass("icon").addClass("icon-save").addClass("ak-toggle-button").addClass("ak-stacked-button").click(function(){var h=e.find(".ak_filter_item:first").find("input.folder_editor").val();h=a.trim(h);var j=e.find(".ak_filter_item:first").next().find("input.virtual_editor").val();j=a.trim(j);if(empty(j)){j=Math.uuid(8)+"-"+basename(h)}var i=[];if(h==""){i=e.data("def");if(i[0]==""){a(this).parent().find("span.cancel").click()}else{e.find("td:first").find("span.delete").show();e.find("td:first").find("span.delete").click()}}else{i=e.data("def");var g={uuid:e.data("rootuuid"),root:h,data:j,verb:"set"};akeeba.Fsfilters.toggle(g,a(this),function(k,l){if(k.success==true){if(i[0]==""){a(l).parent().find("span.editbutton").removeClass("icon-plus-circle").addClass("icon-pencil").addClass("ak-toggle-button");akeeba.Extradirs.addNewRecordButton(c)}var m=[h,j];e.data("def",m);e.find(".ak_filter_item:first").find("span.ak_directory").html(h);e.find(".ak_filter_item:first").next().find("span.ak_virtual").html(j);a(l).parent().find("span.ak_filter_tab_icon_container").show();a(l).parent().find("span.cancel").remove();e.find("td:first").find("span.delete").show();a(l).remove();e.find(".ak_filter_item:first").find("input.folder_editor").remove();e.find(".ak_filter_item:first").next().find("input.virtual_editor").remove();e.find(".ak_filter_item:first").find("span.browse").remove();e.find(".ak_filter_item:first").find("span.ak_directory").show();e.find(".ak_filter_item:first").next().find("span.ak_virtual").show()}},false)}}));a(this).parent().append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container btn btn-default cancel").addClass("icon").addClass("icon-cancel").addClass("ak-toggle-button").click(function(){a(this).parent().find("span.ak_filter_tab_icon_container").show();a(this).parent().find("span.save").remove();a(this).remove();e.find(".ak_filter_item:first").find("input.folder_editor").remove();e.find(".ak_filter_item:first").next().find("input.virtual_editor").remove();e.find(".ak_filter_item:first").find("span.browse").remove();e.find(".ak_filter_item:first").find("span.ak_directory").show();e.find(".ak_filter_item:first").next().find("span.ak_virtual").show();var g=e.data("def");if(g[0]!=""){e.find("td:first").find("span.delete").show()}}));var f=e.data("def");a(this).parent().parent().find(".ak_filter_item:first").append(a(document.createElement("input")).attr({type:"text",size:60}).addClass("folder_editor").val(f[0])).append(a(document.createElement("span")).addClass("ak_filter_tab_icon_container btn btn-default").addClass("browse").addClass("icon").addClass("icon-folder-open").addClass("ak-toggle-button").click(function(){var g=a(this).parent().find("input.folder_editor");var h=a.trim(g.val());if(h==""){h="[ROOTPARENT]"}akeeba.Configuration.onBrowser(h,g)}));a(this).parent().parent().find(".ak_filter_item:first").next().append(a(document.createElement("input")).attr({type:"text",size:60}).addClass("virtual_editor").val(f[1]));e.find(".ak_filter_item:first").find("span.ak_directory").hide();e.find(".ak_filter_item:first").next().find("span.ak_virtual").hide()}).append(a(document.createElement("span")).addClass("icon icon-pencil editbutton ak-toggle-button")))).append(a(document.createElement("td")).addClass("ak_filter_item").append(a(document.createElement("span")).addClass("ak_filter_name").addClass("ak_directory").html(d[0]))).append(a(document.createElement("td")).addClass("ak_filter_item").append(a(document.createElement("span")).addClass("ak_filter_name").addClass("ak_virtual").html(d[1]))).appendTo(a(c))};akeeba.Extradirs.addNewRecordButton=function(d){var b=Math.uuid();var c=["",""];akeeba.Extradirs.addRow(b,c,d);a("#ak_list_contents tr:last-child td:first-child span:first").hide();a("#ak_list_contents tr:last-child td:nth-child(2) span:last").removeClass("icon-pencil").addClass("icon-plus-circle").addClass("ak-toggle-button")}}(akeeba.jQuery));