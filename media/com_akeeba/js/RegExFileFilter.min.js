if(typeof akeeba=="undefined"){var akeeba={}}if(typeof akeeba.Regexfsfilters=="undefined"){akeeba.Regexfsfilters={currentRoot:null}}(function(b){akeeba.Regexfsfilters.activeRootChanged=function(){akeeba.Regexfsfilters.load(b("#active_root").val())};akeeba.Regexfsfilters.load=function a(c){var e={root:c,verb:"list"};var d={akaction:JSON.stringify(e)};akeeba.System.doAjax(d,function(f){akeeba.Regexfsfilters.render(f)},null,false,15000)};akeeba.Regexfsfilters.render=function(e){var c=b("#ak_list_contents");c.html("");b.each(e,function(f,g){akeeba.Regexfsfilters.addRow(g,c)});var d={type:"",item:""};akeeba.Regexfsfilters.addNewRow(c)};akeeba.Regexfsfilters.addRow=function(i,h){var d=b(document.createElement("tr")).appendTo(h);var f="icon-pencil";if(i.item==""){f="icon-plus-circle"}var g=b(document.createElement("td")).append(b(document.createElement("span")).addClass("icon table-icon-container btn btn-default edit ak-toggle-button").addClass(f).click(function(){var k=["regexfiles","regexdirectories","regexskipdirs","regexskipfiles"];var j=b(document.createElement("select")).attr("name","type").addClass("type-select");b.each(k,function(m,o){var n=false;if(o==i.type){n=true}j.append(b(document.createElement("option")).attr("value",o).html(Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_"+String(o).toUpperCase().substr(5))));if(n){j.children(":last").attr("selected","selected")}});d.find("td.ak-type span").hide();d.find("td.ak-type").append(j);var l=b(document.createElement("input")).attr({type:"text",name:"item",size:"100"}).val(i.item);d.find("td.ak-item tt").hide();d.find("td.ak-item").append(l);d.find("td:first span.edit").hide();d.find("td:first span.delete").hide();d.find("td:first").append(b(document.createElement("span")).addClass("icon icon-save table-icon-container btn btn-default save ak-toggle-button").click(function(){d.find("td:first span.delete").hide("fast");var n=j.val();var o=l.val();if(trim(o)==""){if(i.item==""){d.find("td:first span.cancel").click();return}else{d.find("td:first span.delete").click();return}}var m={verb:"set",type:n,node:o,root:b("#active_root").val()};akeeba.Fsfilters.toggle(m,b(this),function(r,s){var q=(i.item!="")&&(i.type!="")&&((i.item!=o)||(i.type!=n));var u=(i.item=="")||(i.type=="");if(i.item==""){d.find("td:first span.edit").removeClass("icon-plus-circle").addClass("icon-pencil")}m.type=i.type;m.node=i.item;i.type=n;i.item=o;var t="COM_AKEEBA_FILEFILTERS_TYPE_"+String(i.type).toUpperCase().substr(5);var p=Joomla.JText._(t);d.find("td.ak-type span").html(p);d.find("td.ak-item tt").html(escapeHTML(i.item));d.find("td:first span.cancel").click();if(q){m.verb="remove";akeeba.Fsfilters.toggle(m,b(this),function(v,w){},false)}else{if((i.item!=o)||(i.type!=n)||u){akeeba.Regexfsfilters.addNewRow(h)}}},false)}));d.find("td:first").append(b(document.createElement("span")).addClass("icon icon-cancel table-icon-container btn btn-default cancel ak-toggle-button").click(function(){d.find("td:first span.save").remove();d.find("td:first span.cancel").remove();d.find("td:first span.edit").show();if(i.item!=""){d.find("td:first span.delete").show()}j.remove();d.find("td.ak-type span").show();l.remove();d.find("td.ak-item tt").show()}))})).append(b(document.createElement("span")).addClass("icon icon-trash table-icon-container btn btn-default delete ak-toggle-button").click(function(){var j={verb:"remove",type:i.type,node:i.item,root:b("#active_root").val()};akeeba.Fsfilters.toggle(j,b(this),function(k,l){d.remove();if(i.item==""){akeeba.Regexfsfilters.addNewRow(h)}},false)})).appendTo(d);if(i.item==""){b(g).find("span.delete").hide()}var e="COM_AKEEBA_FILEFILTERS_TYPE_"+String(i.type).toUpperCase().substr(5);var c=Joomla.JText._(e);if(i.type==""){c=""}d.append(b(document.createElement("td")).addClass("ak-type").html("<span>"+c+"</span>"));d.append(b(document.createElement("td")).addClass("ak-item").html("<tt>"+((i.item==null)?"":escapeHTML(i.item))+"</tt>"))};akeeba.Regexfsfilters.addNewRow=function(d){var c={type:"",item:""};akeeba.Regexfsfilters.addRow(c,d)}}(akeeba.jQuery));