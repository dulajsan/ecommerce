(function(){var e={};var l=null;var a=null;var n=null;var c=null;var p={};var g={color:"#ff0084",background:"#bbb",shadow:"#fff",fallback:false};var o=window.devicePixelRatio>1;var b=(function(){var q=navigator.userAgent.toLowerCase();return function(r){return q.indexOf(r)!==-1}}());var i={ie:b("msie"),chrome:b("chrome"),webkit:b("chrome")||b("safari"),safari:b("safari")&&!b("chrome"),mozilla:b("mozilla")&&!b("chrome")&&!b("safari")};var d=function(){var r=document.getElementsByTagName("link");for(var s=0,q=r.length;s<q;s++){if(r[s].getAttribute("rel")==="icon"||r[s].getAttribute("rel")==="shortcut icon"){return r[s]}}return false};var f=function(){var r=Array.prototype.slice.call(document.getElementsByTagName("link"),0);var t=document.getElementsByTagName("head")[0];for(var s=0,q=r.length;s<q;s++){if(r[s].getAttribute("rel")==="icon"||r[s].getAttribute("rel")==="shortcut icon"){t.removeChild(r[s])}}};var h=function(q){f();var r=document.createElement("link");r.type="image/x-icon";r.rel="icon";r.href=q;document.getElementsByTagName("head")[0].appendChild(r)};var m=function(){if(!c){c=document.createElement("canvas");if(o){c.width=32;c.height=32}else{c.width=16;c.height=16}}return c};var j=function(q){var r=m();var s=r.getContext("2d");q=q||0;if(s){s.clearRect(0,0,r.width,r.height);s.beginPath();s.moveTo(r.width/2,r.height/2);s.arc(r.width/2,r.height/2,Math.min(r.width/2,r.height/2),0,Math.PI*2,false);s.fillStyle=p.shadow;s.fill();s.beginPath();s.moveTo(r.width/2,r.height/2);s.arc(r.width/2,r.height/2,Math.min(r.width/2,r.height/2)-2,0,Math.PI*2,false);s.fillStyle=p.background;s.fill();if(q>0){s.beginPath();s.moveTo(r.width/2,r.height/2);s.arc(r.width/2,r.height/2,Math.min(r.width/2,r.height/2)-2,(-0.5)*Math.PI,(-0.5+2*q/100)*Math.PI,false);s.lineTo(r.width/2,r.height/2);s.fillStyle=p.color;s.fill()}h(r.toDataURL())}};var k=function(q){if(q>0){document.title="("+q+"%) "+n}else{document.title=n}};e.setOptions=function(r){p={};for(var q in g){p[q]=r.hasOwnProperty(q)?r[q]:g[q]}return this};e.setProgress=function(r){if(!n){n=document.title}if(!a||!l){var q=d();a=l=q?q.getAttribute("href"):"/favicon.ico"}if(!isNaN(parseFloat(r))&&isFinite(r)){if(!m().getContext||i.ie||i.safari||p.fallback===true){return k(r)}else{if(p.fallback==="force"){k(r)}}return j(r)}return false};e.reset=function(){if(n){document.title=n}if(a){l=a;h(l)}};e.setOptions(g);if(typeof define==="function"&&define.amd){define(e)}else{if(typeof module!=="undefined"){module.exports=e}else{window.Piecon=e}}})();